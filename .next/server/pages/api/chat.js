"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/chat";
exports.ids = ["pages/api/chat"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fchat.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fchat.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   handler: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/api-utils */ \"(api-node)/./node_modules/next/dist/server/api-utils/index.js\");\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./src/pages/api/chat.ts */ \"(api-node)/./src/pages/api/chat.ts\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(api-node)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(api-node)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_4__]);\n_src_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// Import the userland code.\n\n\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_src_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_4__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_src_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_4__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/chat\",\n        pathname: \"/api/chat\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _src_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_4__,\n    distDir: \".next\" || 0,\n    projectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    let srcPage = \"/api/chat\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {}\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.getTracer)();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: undefined,\n                multiZoneDraftMode: Boolean(\"false\"),\n                trustHostHeader: undefined,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/chat\",\n                projectDir:  false || '',\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        (0,next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__.sendError)(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGY2hhdCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyUyRnBhZ2VzJTJGYXBpJTJGY2hhdC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDQztBQUN1QztBQUNyQztBQUMxRDtBQUNvRDtBQUNvQjtBQUNGO0FBQ3RFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxtREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsbURBQVE7QUFDcEM7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixhQUFhLE9BQW9DLElBQUksQ0FBRTtBQUN2RCxnQkFBZ0IsTUFBdUM7QUFDdkQsQ0FBQztBQUNNO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLEtBQXFCLEVBQUUsRUFFMUI7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbUNBQW1DO0FBQy9DO0FBQ0E7QUFDQSx1QkFBdUIsNEVBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsNkNBQTZDLFNBQTZDO0FBQzFGLDRDQUE0QyxPQUF3QztBQUNwRixpQ0FBaUMsU0FBb0M7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLE1BQXVDO0FBQ25FO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsZ0ZBQWM7QUFDL0UsK0RBQStELHlDQUF5QztBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxRQUFRLEVBQUUsTUFBTTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGtCQUFrQjtBQUNsQix1Q0FBdUMsUUFBUSxFQUFFLFFBQVE7QUFDekQ7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNkVBQTZFLGdGQUFjO0FBQzNGLGlDQUFpQyxRQUFRLEVBQUUsUUFBUTtBQUNuRCwwQkFBMEIsdUVBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxRUFBUztBQUNqQixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2VuZEVycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYXBpLXV0aWxzXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvY2hhdC50c1wiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCAnZGVmYXVsdCcpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgJ2NvbmZpZycpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jaGF0XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2hhdFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kLFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICBwcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJydcbn0pO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMsIGN0eCkge1xuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL2NoYXRcIjtcbiAgICAvLyB0dXJib3BhY2sgZG9lc24ndCBub3JtYWxpemUgYC9pbmRleGAgaW4gdGhlIHBhZ2UgbmFtZVxuICAgIC8vIHNvIHdlIG5lZWQgdG8gdG8gcHJvY2VzcyBkeW5hbWljIHJvdXRlcyBwcm9wZXJseVxuICAgIC8vIFRPRE86IGZpeCB0dXJib3BhY2sgcHJvdmlkaW5nIGRpZmZlcmluZyB2YWx1ZSBmcm9tIHdlYnBhY2tcbiAgICBpZiAocHJvY2Vzcy5lbnYuVFVSQk9QQUNLKSB7XG4gICAgICAgIHNyY1BhZ2UgPSBzcmNQYWdlLnJlcGxhY2UoL1xcL2luZGV4JC8sICcnKSB8fCAnLyc7XG4gICAgfVxuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2VcbiAgICB9KTtcbiAgICBpZiAoIXByZXBhcmVSZXN1bHQpIHtcbiAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDA7XG4gICAgICAgIHJlcy5lbmQoJ0JhZCBSZXF1ZXN0Jyk7XG4gICAgICAgIGN0eC53YWl0VW50aWwgPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC53YWl0VW50aWwuY2FsbChjdHgsIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IHF1ZXJ5LCBwYXJhbXMsIHByZXJlbmRlck1hbmlmZXN0IH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgICAgIGNvbnN0IHRyYWNlciA9IGdldFRyYWNlcigpO1xuICAgICAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgICAgICBjb25zdCBvblJlcXVlc3RFcnJvciA9IHJvdXRlTW9kdWxlLmluc3RydW1lbnRhdGlvbk9uUmVxdWVzdEVycm9yLmJpbmQocm91dGVNb2R1bGUpO1xuICAgICAgICBjb25zdCBpbnZva2VSb3V0ZU1vZHVsZSA9IGFzeW5jIChzcGFuKT0+cm91dGVNb2R1bGUucmVuZGVyKHJlcSwgcmVzLCB7XG4gICAgICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucXVlcnksXG4gICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtc1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRSZXZhbGlkYXRlSGVhZGVyS2V5czogcHJvY2Vzcy5lbnYuX19ORVhUX0FMTE9XRURfUkVWQUxJREFURV9IRUFERVJTLFxuICAgICAgICAgICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZTogQm9vbGVhbihwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFKSxcbiAgICAgICAgICAgICAgICB0cnVzdEhvc3RIZWFkZXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9UUlVTVF9IT1NUX0hFQURFUixcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBnZXQgdGhpcyBmcm9tIGZyb20gcnVudGltZSBlbnYgc28gbWFuaWZlc3RcbiAgICAgICAgICAgICAgICAvLyBkb2Vzbid0IG5lZWQgdG8gbG9hZFxuICAgICAgICAgICAgICAgIHByZXZpZXdQcm9wczogcHJlcmVuZGVyTWFuaWZlc3QucHJldmlldyxcbiAgICAgICAgICAgICAgICBwcm9wYWdhdGVFcnJvcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGV2OiByb3V0ZU1vZHVsZS5pc0RldixcbiAgICAgICAgICAgICAgICBwYWdlOiBcIi9hcGkvY2hhdFwiLFxuICAgICAgICAgICAgICAgIHByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJyxcbiAgICAgICAgICAgICAgICBvbkVycm9yOiAoLi4uYXJncyk9Pm9uUmVxdWVzdEVycm9yKHJlcSwgLi4uYXJncylcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGludm9rZVJvdXRlTW9kdWxlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gd2UgcmUtdGhyb3cgaW4gZGV2IHRvIHNob3cgdGhlIGVycm9yIG92ZXJsYXlcbiAgICAgICAgaWYgKHJvdXRlTW9kdWxlLmlzRGV2KSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcyBpcyB0ZWNobmljYWxseSBhbiBpbnZhcmlhbnQgYXMgZXJyb3IgaGFuZGxpbmdcbiAgICAgICAgLy8gc2hvdWxkIGJlIGRvbmUgaW5zaWRlIG9mIGFwaS1yZXNvbHZlciBvbkVycm9yXG4gICAgICAgIHNlbmRFcnJvcihyZXMsIDUwMCwgJ0ludGVybmFsIFNlcnZlciBFcnJvcicpO1xuICAgIH0gZmluYWxseXtcbiAgICAgICAgLy8gV2UgZG9uJ3QgYWxsb3cgYW55IHdhaXRVbnRpbCB3b3JrIGluIHBhZ2VzIEFQSSByb3V0ZXMgY3VycmVudGx5XG4gICAgICAgIC8vIHNvIGlmIGNhbGxiYWNrIGlzIHByZXNlbnQgcmV0dXJuIHdpdGggcmVzb2x2ZWQgcHJvbWlzZSBzaW5jZSBub1xuICAgICAgICAvLyBwZW5kaW5nIHdvcmtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fchat.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./src/pages/api/chat.ts":
/*!*******************************!*\
  !*** ./src/pages/api/chat.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _services_openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../services/openai */ \"(api-node)/./src/services/openai.ts\");\n/* harmony import */ var _services_dataStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../services/dataStore */ \"(api-node)/./src/services/dataStore.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_services_openai__WEBPACK_IMPORTED_MODULE_0__]);\n_services_openai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function handler(req, res) {\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            error: 'Method not allowed'\n        });\n    }\n    if (!process.env.OPENAI_API_KEY) {\n        return res.status(500).json({\n            error: 'OpenAI API key not configured'\n        });\n    }\n    const { message } = req.body;\n    if (!message || typeof message !== 'string' || message.trim().length === 0) {\n        return res.status(400).json({\n            error: 'Valid message is required'\n        });\n    }\n    if (message.length > 1000) {\n        return res.status(400).json({\n            error: 'Message too long'\n        });\n    }\n    try {\n        const customerData = await (0,_services_dataStore__WEBPACK_IMPORTED_MODULE_1__.loadCustomerData)();\n        const formattedData = (0,_services_dataStore__WEBPACK_IMPORTED_MODULE_1__.formatDataForAI)(customerData);\n        const reply = await (0,_services_openai__WEBPACK_IMPORTED_MODULE_0__.createChatCompletion)([\n            {\n                role: 'user',\n                content: message\n            }\n        ], formattedData);\n        res.status(200).json({\n            message: reply\n        });\n    } catch (error) {\n        console.error('Chat API error:', error);\n        if (error?.status === 429) {\n            return res.status(429).json({\n                error: 'Rate limit exceeded. Please try again later.'\n            });\n        }\n        res.status(500).json({\n            error: 'Failed to generate response'\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9wYWdlcy9hcGkvY2hhdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFDNkQ7QUFDZ0I7QUFFOUQsZUFBZUcsUUFBUUMsR0FBbUIsRUFBRUMsR0FBb0I7SUFDN0UsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLFFBQVE7UUFDekIsT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXFCO0lBQzVEO0lBRUEsSUFBSSxDQUFDQyxRQUFRQyxHQUFHLENBQUNDLGNBQWMsRUFBRTtRQUMvQixPQUFPUCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBZ0M7SUFDdkU7SUFFQSxNQUFNLEVBQUVJLE9BQU8sRUFBRSxHQUFHVCxJQUFJVSxJQUFJO0lBRTVCLElBQUksQ0FBQ0QsV0FBVyxPQUFPQSxZQUFZLFlBQVlBLFFBQVFFLElBQUksR0FBR0MsTUFBTSxLQUFLLEdBQUc7UUFDMUUsT0FBT1gsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQTRCO0lBQ25FO0lBRUEsSUFBSUksUUFBUUcsTUFBTSxHQUFHLE1BQU07UUFDekIsT0FBT1gsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQW1CO0lBQzFEO0lBRUEsSUFBSTtRQUNGLE1BQU1RLGVBQWUsTUFBTWhCLHFFQUFnQkE7UUFDM0MsTUFBTWlCLGdCQUFnQmhCLG9FQUFlQSxDQUFDZTtRQUV0QyxNQUFNRSxRQUFRLE1BQU1uQixzRUFBb0JBLENBQUM7WUFDdkM7Z0JBQUVvQixNQUFNO2dCQUFRQyxTQUFTUjtZQUFRO1NBQ2xDLEVBQUVLO1FBRUhiLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUssU0FBU007UUFBTTtJQUN4QyxFQUFFLE9BQU9WLE9BQVk7UUFDbkJhLFFBQVFiLEtBQUssQ0FBQyxtQkFBbUJBO1FBRWpDLElBQUlBLE9BQU9GLFdBQVcsS0FBSztZQUN6QixPQUFPRixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQStDO1FBQ3RGO1FBRUFKLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUE4QjtJQUM5RDtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvaWhvcnZpbnNvbi9Eb2N1bWVudHMvRGV2IHByb2plY3RzL3dlYnNpdGUtcmVhY3QtQUljaGF0Ym90LXdpZGdldC9zcmMvcGFnZXMvYXBpL2NoYXQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHsgY3JlYXRlQ2hhdENvbXBsZXRpb24gfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9vcGVuYWknO1xuaW1wb3J0IHsgbG9hZEN1c3RvbWVyRGF0YSwgZm9ybWF0RGF0YUZvckFJIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvZGF0YVN0b3JlJztcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICB9XG5cbiAgaWYgKCFwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnT3BlbkFJIEFQSSBrZXkgbm90IGNvbmZpZ3VyZWQnIH0pO1xuICB9XG5cbiAgY29uc3QgeyBtZXNzYWdlIH0gPSByZXEuYm9keTtcbiAgXG4gIGlmICghbWVzc2FnZSB8fCB0eXBlb2YgbWVzc2FnZSAhPT0gJ3N0cmluZycgfHwgbWVzc2FnZS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdWYWxpZCBtZXNzYWdlIGlzIHJlcXVpcmVkJyB9KTtcbiAgfVxuXG4gIGlmIChtZXNzYWdlLmxlbmd0aCA+IDEwMDApIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ01lc3NhZ2UgdG9vIGxvbmcnIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBjdXN0b21lckRhdGEgPSBhd2FpdCBsb2FkQ3VzdG9tZXJEYXRhKCk7XG4gICAgY29uc3QgZm9ybWF0dGVkRGF0YSA9IGZvcm1hdERhdGFGb3JBSShjdXN0b21lckRhdGEpO1xuICAgIFxuICAgIGNvbnN0IHJlcGx5ID0gYXdhaXQgY3JlYXRlQ2hhdENvbXBsZXRpb24oW1xuICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IG1lc3NhZ2UgfVxuICAgIF0sIGZvcm1hdHRlZERhdGEpO1xuICAgIFxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogcmVwbHkgfSk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDaGF0IEFQSSBlcnJvcjonLCBlcnJvcik7XG4gICAgXG4gICAgaWYgKGVycm9yPy5zdGF0dXMgPT09IDQyOSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDI5KS5qc29uKHsgZXJyb3I6ICdSYXRlIGxpbWl0IGV4Y2VlZGVkLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicgfSk7XG4gICAgfVxuICAgIFxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgcmVzcG9uc2UnIH0pO1xuICB9XG59Il0sIm5hbWVzIjpbImNyZWF0ZUNoYXRDb21wbGV0aW9uIiwibG9hZEN1c3RvbWVyRGF0YSIsImZvcm1hdERhdGFGb3JBSSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJtZXNzYWdlIiwiYm9keSIsInRyaW0iLCJsZW5ndGgiLCJjdXN0b21lckRhdGEiLCJmb3JtYXR0ZWREYXRhIiwicmVwbHkiLCJyb2xlIiwiY29udGVudCIsImNvbnNvbGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/pages/api/chat.ts\n");

/***/ }),

/***/ "(api-node)/./src/services/dataStore.ts":
/*!***********************************!*\
  !*** ./src/services/dataStore.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatDataForAI: () => (/* binding */ formatDataForAI),\n/* harmony export */   loadCustomerData: () => (/* binding */ loadCustomerData)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\nlet cachedData = null;\nconst loadCustomerData = async ()=>{\n    if (cachedData) return cachedData;\n    try {\n        const dataPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'data', 'customer-data.json');\n        const fileContent = await fs__WEBPACK_IMPORTED_MODULE_0__.promises.readFile(dataPath, 'utf-8');\n        cachedData = JSON.parse(fileContent);\n        return cachedData;\n    } catch (error) {\n        console.warn('Customer data file not found, using default data');\n        cachedData = {\n            faq: [\n                {\n                    question: \"What is this service?\",\n                    answer: \"We provide AI-powered customer support.\"\n                },\n                {\n                    question: \"How can I contact support?\",\n                    answer: \"You can reach us through this chat widget.\"\n                }\n            ]\n        };\n        return cachedData;\n    }\n};\nconst formatDataForAI = (data)=>{\n    let formatted = '';\n    if (data.faq?.length) {\n        formatted += 'FAQ:\\n' + data.faq.map((item)=>`Q: ${item.question}\\nA: ${item.answer}`).join('\\n\\n');\n    }\n    if (data.pricing?.length) {\n        formatted += '\\n\\nPricing:\\n' + data.pricing.map((item)=>`${item.plan}: ${item.price}\\nFeatures: ${item.features.join(', ')}`).join('\\n\\n');\n    }\n    if (data.products?.length) {\n        formatted += '\\n\\nProducts:\\n' + data.products.map((item)=>`${item.name}: ${item.description} - ${item.price}`).join('\\n');\n    }\n    return formatted;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2aWNlcy9kYXRhU3RvcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW9DO0FBQ1o7QUFReEIsSUFBSUcsYUFBa0M7QUFFL0IsTUFBTUMsbUJBQW1CO0lBQzlCLElBQUlELFlBQVksT0FBT0E7SUFFdkIsSUFBSTtRQUNGLE1BQU1FLFdBQVdILGdEQUFTLENBQUNLLFFBQVFDLEdBQUcsSUFBSSxRQUFRO1FBQ2xELE1BQU1DLGNBQWMsTUFBTVIsd0NBQUVBLENBQUNTLFFBQVEsQ0FBQ0wsVUFBVTtRQUNoREYsYUFBYVEsS0FBS0MsS0FBSyxDQUFDSDtRQUN4QixPQUFPTjtJQUNULEVBQUUsT0FBT1UsT0FBTztRQUNkQyxRQUFRQyxJQUFJLENBQUM7UUFDYlosYUFBYTtZQUNYYSxLQUFLO2dCQUNIO29CQUFFQyxVQUFVO29CQUF5QkMsUUFBUTtnQkFBMEM7Z0JBQ3ZGO29CQUFFRCxVQUFVO29CQUE4QkMsUUFBUTtnQkFBNkM7YUFDaEc7UUFDSDtRQUNBLE9BQU9mO0lBQ1Q7QUFDRixFQUFFO0FBRUssTUFBTWdCLGtCQUFrQixDQUFDQztJQUM5QixJQUFJQyxZQUFZO0lBRWhCLElBQUlELEtBQUtKLEdBQUcsRUFBRU0sUUFBUTtRQUNwQkQsYUFBYSxXQUFXRCxLQUFLSixHQUFHLENBQUNPLEdBQUcsQ0FBQ0MsQ0FBQUEsT0FBUSxDQUFDLEdBQUcsRUFBRUEsS0FBS1AsUUFBUSxDQUFDLEtBQUssRUFBRU8sS0FBS04sTUFBTSxFQUFFLEVBQUVaLElBQUksQ0FBQztJQUM5RjtJQUVBLElBQUljLEtBQUtLLE9BQU8sRUFBRUgsUUFBUTtRQUN4QkQsYUFBYSxtQkFBbUJELEtBQUtLLE9BQU8sQ0FBQ0YsR0FBRyxDQUFDQyxDQUFBQSxPQUMvQyxHQUFHQSxLQUFLRSxJQUFJLENBQUMsRUFBRSxFQUFFRixLQUFLRyxLQUFLLENBQUMsWUFBWSxFQUFFSCxLQUFLSSxRQUFRLENBQUN0QixJQUFJLENBQUMsT0FBTyxFQUNwRUEsSUFBSSxDQUFDO0lBQ1Q7SUFFQSxJQUFJYyxLQUFLUyxRQUFRLEVBQUVQLFFBQVE7UUFDekJELGFBQWEsb0JBQW9CRCxLQUFLUyxRQUFRLENBQUNOLEdBQUcsQ0FBQ0MsQ0FBQUEsT0FDakQsR0FBR0EsS0FBS00sSUFBSSxDQUFDLEVBQUUsRUFBRU4sS0FBS08sV0FBVyxDQUFDLEdBQUcsRUFBRVAsS0FBS0csS0FBSyxFQUFFLEVBQ25EckIsSUFBSSxDQUFDO0lBQ1Q7SUFFQSxPQUFPZTtBQUNULEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9paG9ydmluc29uL0RvY3VtZW50cy9EZXYgcHJvamVjdHMvd2Vic2l0ZS1yZWFjdC1BSWNoYXRib3Qtd2lkZ2V0L3NyYy9zZXJ2aWNlcy9kYXRhU3RvcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcHJvbWlzZXMgYXMgZnMgfSBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuaW50ZXJmYWNlIEN1c3RvbWVyRGF0YSB7XG4gIGZhcT86IEFycmF5PHsgcXVlc3Rpb246IHN0cmluZzsgYW5zd2VyOiBzdHJpbmcgfT47XG4gIHByaWNpbmc/OiBBcnJheTx7IHBsYW46IHN0cmluZzsgcHJpY2U6IHN0cmluZzsgZmVhdHVyZXM6IHN0cmluZ1tdIH0+O1xuICBwcm9kdWN0cz86IEFycmF5PHsgbmFtZTogc3RyaW5nOyBkZXNjcmlwdGlvbjogc3RyaW5nOyBwcmljZTogc3RyaW5nIH0+O1xufVxuXG5sZXQgY2FjaGVkRGF0YTogQ3VzdG9tZXJEYXRhIHwgbnVsbCA9IG51bGw7XG5cbmV4cG9ydCBjb25zdCBsb2FkQ3VzdG9tZXJEYXRhID0gYXN5bmMgKCk6IFByb21pc2U8Q3VzdG9tZXJEYXRhPiA9PiB7XG4gIGlmIChjYWNoZWREYXRhKSByZXR1cm4gY2FjaGVkRGF0YTtcblxuICB0cnkge1xuICAgIGNvbnN0IGRhdGFQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdkYXRhJywgJ2N1c3RvbWVyLWRhdGEuanNvbicpO1xuICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgZnMucmVhZEZpbGUoZGF0YVBhdGgsICd1dGYtOCcpO1xuICAgIGNhY2hlZERhdGEgPSBKU09OLnBhcnNlKGZpbGVDb250ZW50KTtcbiAgICByZXR1cm4gY2FjaGVkRGF0YSE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKCdDdXN0b21lciBkYXRhIGZpbGUgbm90IGZvdW5kLCB1c2luZyBkZWZhdWx0IGRhdGEnKTtcbiAgICBjYWNoZWREYXRhID0ge1xuICAgICAgZmFxOiBbXG4gICAgICAgIHsgcXVlc3Rpb246IFwiV2hhdCBpcyB0aGlzIHNlcnZpY2U/XCIsIGFuc3dlcjogXCJXZSBwcm92aWRlIEFJLXBvd2VyZWQgY3VzdG9tZXIgc3VwcG9ydC5cIiB9LFxuICAgICAgICB7IHF1ZXN0aW9uOiBcIkhvdyBjYW4gSSBjb250YWN0IHN1cHBvcnQ/XCIsIGFuc3dlcjogXCJZb3UgY2FuIHJlYWNoIHVzIHRocm91Z2ggdGhpcyBjaGF0IHdpZGdldC5cIiB9XG4gICAgICBdXG4gICAgfTtcbiAgICByZXR1cm4gY2FjaGVkRGF0YTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGZvcm1hdERhdGFGb3JBSSA9IChkYXRhOiBDdXN0b21lckRhdGEpOiBzdHJpbmcgPT4ge1xuICBsZXQgZm9ybWF0dGVkID0gJyc7XG4gIFxuICBpZiAoZGF0YS5mYXE/Lmxlbmd0aCkge1xuICAgIGZvcm1hdHRlZCArPSAnRkFROlxcbicgKyBkYXRhLmZhcS5tYXAoaXRlbSA9PiBgUTogJHtpdGVtLnF1ZXN0aW9ufVxcbkE6ICR7aXRlbS5hbnN3ZXJ9YCkuam9pbignXFxuXFxuJyk7XG4gIH1cbiAgXG4gIGlmIChkYXRhLnByaWNpbmc/Lmxlbmd0aCkge1xuICAgIGZvcm1hdHRlZCArPSAnXFxuXFxuUHJpY2luZzpcXG4nICsgZGF0YS5wcmljaW5nLm1hcChpdGVtID0+IFxuICAgICAgYCR7aXRlbS5wbGFufTogJHtpdGVtLnByaWNlfVxcbkZlYXR1cmVzOiAke2l0ZW0uZmVhdHVyZXMuam9pbignLCAnKX1gXG4gICAgKS5qb2luKCdcXG5cXG4nKTtcbiAgfVxuICBcbiAgaWYgKGRhdGEucHJvZHVjdHM/Lmxlbmd0aCkge1xuICAgIGZvcm1hdHRlZCArPSAnXFxuXFxuUHJvZHVjdHM6XFxuJyArIGRhdGEucHJvZHVjdHMubWFwKGl0ZW0gPT4gXG4gICAgICBgJHtpdGVtLm5hbWV9OiAke2l0ZW0uZGVzY3JpcHRpb259IC0gJHtpdGVtLnByaWNlfWBcbiAgICApLmpvaW4oJ1xcbicpO1xuICB9XG4gIFxuICByZXR1cm4gZm9ybWF0dGVkO1xufTsiXSwibmFtZXMiOlsicHJvbWlzZXMiLCJmcyIsInBhdGgiLCJjYWNoZWREYXRhIiwibG9hZEN1c3RvbWVyRGF0YSIsImRhdGFQYXRoIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJmaWxlQ29udGVudCIsInJlYWRGaWxlIiwiSlNPTiIsInBhcnNlIiwiZXJyb3IiLCJjb25zb2xlIiwid2FybiIsImZhcSIsInF1ZXN0aW9uIiwiYW5zd2VyIiwiZm9ybWF0RGF0YUZvckFJIiwiZGF0YSIsImZvcm1hdHRlZCIsImxlbmd0aCIsIm1hcCIsIml0ZW0iLCJwcmljaW5nIiwicGxhbiIsInByaWNlIiwiZmVhdHVyZXMiLCJwcm9kdWN0cyIsIm5hbWUiLCJkZXNjcmlwdGlvbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/services/dataStore.ts\n");

/***/ }),

/***/ "(api-node)/./src/services/openai.ts":
/*!********************************!*\
  !*** ./src/services/openai.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createChatCompletion: () => (/* binding */ createChatCompletion)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_0__]);\nopenai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nconst createChatCompletion = async (messages, customData)=>{\n    const systemPrompt = customData ? `You are a helpful AI assistant. You can answer questions on any topic. If the user asks about customer service topics, you may reference this context: ${customData}. Otherwise, provide helpful and accurate responses to any question.` : 'You are a helpful AI assistant. Answer questions accurately and helpfully on any topic.';\n    const completion = await openai.chat.completions.create({\n        model: 'gpt-3.5-turbo',\n        messages: [\n            {\n                role: 'system',\n                content: systemPrompt\n            },\n            ...messages.filter((m)=>m.role !== 'system')\n        ],\n        max_tokens: 500,\n        temperature: 0.7\n    });\n    return completion.choices[0]?.message?.content || 'Sorry, I could not generate a response.';\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2aWNlcy9vcGVuYWkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBNEI7QUFFNUIsTUFBTUMsU0FBUyxJQUFJRCw4Q0FBTUEsQ0FBQztJQUN4QkUsUUFBUUMsUUFBUUMsR0FBRyxDQUFDQyxjQUFjO0FBQ3BDO0FBT08sTUFBTUMsdUJBQXVCLE9BQ2xDQyxVQUNBQztJQUVBLE1BQU1DLGVBQWVELGFBQ2pCLENBQUMsdUpBQXVKLEVBQUVBLFdBQVcsb0VBQW9FLENBQUMsR0FDMU87SUFFSixNQUFNRSxhQUFhLE1BQU1ULE9BQU9VLElBQUksQ0FBQ0MsV0FBVyxDQUFDQyxNQUFNLENBQUM7UUFDdERDLE9BQU87UUFDUFAsVUFBVTtZQUNSO2dCQUFFUSxNQUFNO2dCQUFVQyxTQUFTUDtZQUFhO2VBQ3JDRixTQUFTVSxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUVILElBQUksS0FBSztTQUNwQztRQUNESSxZQUFZO1FBQ1pDLGFBQWE7SUFDZjtJQUVBLE9BQU9WLFdBQVdXLE9BQU8sQ0FBQyxFQUFFLEVBQUVDLFNBQVNOLFdBQVc7QUFDcEQsRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL2lob3J2aW5zb24vRG9jdW1lbnRzL0RldiBwcm9qZWN0cy93ZWJzaXRlLXJlYWN0LUFJY2hhdGJvdC13aWRnZXQvc3JjL3NlcnZpY2VzL29wZW5haS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSc7XG5cbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxufSk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdE1lc3NhZ2Uge1xuICByb2xlOiAnc3lzdGVtJyB8ICd1c2VyJyB8ICdhc3Npc3RhbnQnO1xuICBjb250ZW50OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVDaGF0Q29tcGxldGlvbiA9IGFzeW5jIChcbiAgbWVzc2FnZXM6IENoYXRNZXNzYWdlW10sXG4gIGN1c3RvbURhdGE/OiBzdHJpbmdcbik6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gIGNvbnN0IHN5c3RlbVByb21wdCA9IGN1c3RvbURhdGEgXG4gICAgPyBgWW91IGFyZSBhIGhlbHBmdWwgQUkgYXNzaXN0YW50LiBZb3UgY2FuIGFuc3dlciBxdWVzdGlvbnMgb24gYW55IHRvcGljLiBJZiB0aGUgdXNlciBhc2tzIGFib3V0IGN1c3RvbWVyIHNlcnZpY2UgdG9waWNzLCB5b3UgbWF5IHJlZmVyZW5jZSB0aGlzIGNvbnRleHQ6ICR7Y3VzdG9tRGF0YX0uIE90aGVyd2lzZSwgcHJvdmlkZSBoZWxwZnVsIGFuZCBhY2N1cmF0ZSByZXNwb25zZXMgdG8gYW55IHF1ZXN0aW9uLmBcbiAgICA6ICdZb3UgYXJlIGEgaGVscGZ1bCBBSSBhc3Npc3RhbnQuIEFuc3dlciBxdWVzdGlvbnMgYWNjdXJhdGVseSBhbmQgaGVscGZ1bGx5IG9uIGFueSB0b3BpYy4nO1xuXG4gIGNvbnN0IGNvbXBsZXRpb24gPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgIG1vZGVsOiAnZ3B0LTMuNS10dXJibycsXG4gICAgbWVzc2FnZXM6IFtcbiAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IHN5c3RlbVByb21wdCB9LFxuICAgICAgLi4ubWVzc2FnZXMuZmlsdGVyKG0gPT4gbS5yb2xlICE9PSAnc3lzdGVtJylcbiAgICBdLFxuICAgIG1heF90b2tlbnM6IDUwMCxcbiAgICB0ZW1wZXJhdHVyZTogMC43LFxuICB9KTtcblxuICByZXR1cm4gY29tcGxldGlvbi5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50IHx8ICdTb3JyeSwgSSBjb3VsZCBub3QgZ2VuZXJhdGUgYSByZXNwb25zZS4nO1xufTsiXSwibmFtZXMiOlsiT3BlbkFJIiwib3BlbmFpIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiY3JlYXRlQ2hhdENvbXBsZXRpb24iLCJtZXNzYWdlcyIsImN1c3RvbURhdGEiLCJzeXN0ZW1Qcm9tcHQiLCJjb21wbGV0aW9uIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJyb2xlIiwiY29udGVudCIsImZpbHRlciIsIm0iLCJtYXhfdG9rZW5zIiwidGVtcGVyYXR1cmUiLCJjaG9pY2VzIiwibWVzc2FnZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/services/openai.ts\n");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fchat.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();